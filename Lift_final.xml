<?xml version="1.0" encoding="utf-8"?><!DOCTYPE nta PUBLIC '-//Uppaal Team//DTD Flat System 1.1//EN' 'http://www.it.uu.se/research/group/darts/uppaal/flat-1_1.dtd'><nta><declaration>// Place global declarations here.
clock x; //A lift órája
chan all_enter, open1, close1, enter1, open2, close2, enter2;
broadcast chan all_open, all_close;


int waiting = 0;
int i = 0;
int floor = 0; // véletlenül gerenárlt emelt szám
int all_closed = 0;
int selected = 0;



</declaration><template><name x="5" y="5">Door</name><parameter>chan &amp;open, chan &amp;close, chan &amp;enter</parameter><declaration>// Place local declarations here.
</declaration><location id="id0" x="-16" y="-608"><name x="16" y="-608">DOOR_OPEN</name></location><location id="id1" x="-16" y="-816"><name x="-80" y="-856">DOOR_CLOSED</name></location><init ref="id1"/><transition><source ref="id0"/><target ref="id1"/><label kind="guard" x="360" y="-768">waiting==0 &amp;&amp; x&gt;=4 &amp;&amp; floor==0</label><label kind="synchronisation" x="368" y="-744">all_close!</label><label kind="assignment" x="376" y="-720">x:=0, all_closed:=all_closed+1, selected:=0</label><nail x="344" y="-656"/><nail x="344" y="-808"/><nail x="232" y="-816"/></transition><transition><source ref="id0"/><target ref="id1"/><label kind="guard" x="-352" y="-784">waiting == 0 &amp;&amp; x&gt;=4</label><label kind="synchronisation" x="-232" y="-760">close!</label><label kind="assignment" x="-288" y="-736">x:=0, selected:=0</label><nail x="-160" y="-664"/><nail x="-160" y="-776"/><nail x="-160" y="-824"/></transition><transition><source ref="id0"/><target ref="id0"/><label kind="guard" x="-176" y="-584">waiting&gt;0</label><label kind="synchronisation" x="-176" y="-568">enter!</label><label kind="assignment" x="-216" y="-536">waiting:=waiting-1, x:=0</label><nail x="-64" y="-536"/><nail x="-96" y="-560"/></transition><transition><source ref="id0"/><target ref="id0"/><label kind="guard" x="64" y="-576">waiting&gt;0</label><label kind="synchronisation" x="64" y="-560">all_enter!</label><label kind="assignment" x="64" y="-544">waiting:=waiting-1, x:=0</label><nail x="64" y="-568"/><nail x="32" y="-536"/></transition><transition><source ref="id1"/><target ref="id0"/><label kind="guard" x="-136" y="-776">x&gt;=2</label><label kind="synchronisation" x="-128" y="-752">open?</label><label kind="assignment" x="-144" y="-728">waiting:=3</label><nail x="-48" y="-776"/><nail x="-48" y="-704"/></transition><transition><source ref="id1"/><target ref="id0"/><label kind="synchronisation" x="56" y="-760">all_open?</label><label kind="assignment" x="48" y="-736">waiting:=3, all_closed:=0</label><nail x="32" y="-776"/><nail x="32" y="-696"/></transition></template><template><name>Elevator</name><location id="id2" x="-5992" y="-720"><name x="-6072" y="-752">waiting_2</name><label kind="comments">Waiting to select floor</label></location><location id="id3" x="-5704" y="-776"><name x="-5816" y="-784">idle_Second</name></location><location id="id4" x="-6304" y="-776"><name x="-6280" y="-784">idle_First</name></location><location id="id5" x="-5704" y="-872"><name x="-5688" y="-880">Second_Floor</name></location><location id="id6" x="-5984" y="-1016"><name x="-5952" y="-1024">waiting_1</name><label kind="comments">waiting to select floor</label></location><location id="id7" x="-5984" y="-1144"><name x="-5960" y="-1152">idle_Ground</name></location><location id="id8" x="-6312" y="-880"><name x="-6408" y="-888">First_Floor</name></location><location id="id9" x="-5984" y="-1224"><name x="-6032" y="-1264">Ground_Floor</name></location><init ref="id9"/><transition><source ref="id2"/><target ref="id2"/><label kind="select" x="-6128" y="-672">i:int[0,2]</label><label kind="guard" x="-6136" y="-632">selected == 0</label><label kind="assignment" x="-6128" y="-648">floor=i, selected = 1</label><nail x="-6056" y="-688"/><nail x="-6024" y="-656"/></transition><transition><source ref="id6"/><target ref="id6"/><label kind="select" x="-6024" y="-968">i:int[1,2]</label><label kind="guard" x="-6040" y="-936">all_closed==2 &amp;&amp; selected == 0</label><label kind="assignment" x="-6016" y="-952">floor=i, selected = 1</label><nail x="-6032" y="-976"/><nail x="-5960" y="-976"/></transition><transition><source ref="id7"/><target ref="id6"/><label kind="synchronisation" x="-5984" y="-1080">all_close?</label><nail x="-5984" y="-1064"/><nail x="-5984" y="-1056"/></transition><transition><source ref="id2"/><target ref="id9"/><label kind="guard" x="-5400" y="-992">x&gt;=2 &amp;&amp; floor==0 &amp;&amp; selected==1</label><nail x="-5992" y="-672"/><nail x="-5424" y="-680"/><nail x="-5448" y="-1248"/></transition><transition><source ref="id2"/><target ref="id5"/><label kind="guard" x="-5976" y="-864">x&gt;=2 &amp;&amp; floor==2 &amp;&amp; selected==1</label><nail x="-5976" y="-888"/></transition><transition><source ref="id2"/><target ref="id8"/><label kind="guard" x="-6288" y="-872">x&gt;=2 &amp;&amp; floor ==1 &amp;&amp; selected==1</label><nail x="-6016" y="-888"/></transition><transition><source ref="id3"/><target ref="id2"/><label kind="synchronisation" x="-5696" y="-736">close2?</label><nail x="-5704" y="-712"/></transition><transition><source ref="id4"/><target ref="id2"/><label kind="synchronisation" x="-6376" y="-720">close1?</label><nail x="-6304" y="-720"/></transition><transition><source ref="id3"/><target ref="id3"/><label kind="synchronisation" x="-5624" y="-776">enter2?</label><nail x="-5632" y="-792"/><nail x="-5632" y="-744"/></transition><transition><source ref="id4"/><target ref="id4"/><label kind="synchronisation" x="-6416" y="-784">enter1?</label><nail x="-6360" y="-800"/><nail x="-6352" y="-760"/></transition><transition><source ref="id5"/><target ref="id3"/><label kind="synchronisation" x="-5696" y="-856">open2!</label><label kind="assignment" x="-5696" y="-840">x:=2</label></transition><transition><source ref="id8"/><target ref="id4"/><label kind="synchronisation" x="-6368" y="-840">open1!</label><label kind="assignment" x="-6364" y="-852">x:=2</label></transition><transition><source ref="id6"/><target ref="id5"/><label kind="guard" x="-5848" y="-960">x&gt;=2 &amp;&amp; floor==2 &amp;&amp; all_closed == 2</label></transition><transition><source ref="id6"/><target ref="id8"/><label kind="guard" x="-6400" y="-984">x&gt;=2 &amp;&amp; floor==1 &amp;&amp; all_closed==2</label></transition><transition><source ref="id7"/><target ref="id7"/><label kind="synchronisation" x="-6128" y="-1136">all_enter?</label><nail x="-6048" y="-1152"/><nail x="-6040" y="-1112"/></transition><transition><source ref="id9"/><target ref="id7"/><label kind="synchronisation" x="-5976" y="-1200">all_open!</label><label kind="assignment" x="-5976" y="-1184">x:=2</label></transition></template><system>// Place template instantiations here.

Door1 = Door(open1,close1, enter1);
Door2 = Door(open2,close2, enter2);




// List one or more processes to be composed into a system.
system Door1, Door2, Elevator;</system></nta>